---
description: 'In editor :: PCGEx | Cluster : Decomposition'
icon: circle
---

# Decomposition

{% hint style="danger" %}
This documentation has been AI-generated from the source code and may not be 100% accurate.
{% endhint %}

> Compute convex/k decomposition of clusters and write partition as an ID on the nodes.

### Overview

This node takes clusters of points (such as those generated by clustering algorithms) and decomposes each cluster into convex or k-convex parts. It assigns a unique cell ID to each point based on which part of the decomposition it belongs to. This is useful for creating varied, non-uniform layouts within clustered regions while maintaining spatial coherence.

{% hint style="info" %}
The output points will have their original attributes preserved and new CellID attributes added.
{% endhint %}

<details>

<summary>Inputs</summary>

* **Main Input** (Point): Points representing clusters to be decomposed
* **Edge Input** (Edge, optional): Edges connecting the points in clusters

</details>

<details>

<summary>Outputs</summary>

* **Main Output** (Point): Points with updated CellID attributes
* **Edge Output** (Edge, optional): Edges from input edges (if enabled)

</details>

### Properties Overview

Controls how the decomposition is computed and how results are written to points.

***

#### Decomposition Settings

Settings that control the convex/k decomposition algorithm.

**Max Concavity Ratio**

_Limits how much of a cell can be inside the hull vs on the hull. 0 = all must be on hull._

* Affects the shape complexity of resulting cells
* Lower values produce more convex (less complex) shapes
* Higher values allow for more concave, complex shapes

**Min Nodes Per Cell**

_Sets the minimum number of points required to form a cell._

* Smaller clusters will not be split further
* Higher values result in fewer, larger cells
* Example: If set to 4, each cell must contain at least 4 points

**Max Cells**

_Limits how many cells can be generated per cluster._

* Prevents excessive fragmentation of large clusters
* Useful for performance and visual control
* Example: If set to 32, no more than 32 cells will be created per cluster

**Max Depth**

_Sets the maximum recursion depth for decomposition._

* Controls how deeply nested the splitting process goes
* Higher values allow for more detailed subdivision
* Example: If set to 100, the algorithm can split clusters up to 100 times

#### Cell ID Attribute Name

_Name of the attribute to write cell IDs to._

* The output points will have a new integer attribute with this name
* Default is "CellID"
* This attribute can be used later in other nodes for routing or styling

### Notes

* This node works best on clusters that are already formed, such as those from clustering algorithms like DBSCAN or K-Means.
* The decomposition process preserves the spatial relationships within each cluster while introducing variation through cell assignment.
* Use this node to create varied layouts within clustered regions, such as different room types within a building cluster or varied terrain features within a landscape region.
