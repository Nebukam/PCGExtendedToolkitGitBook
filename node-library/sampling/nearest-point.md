---
description: 'In editor :: PCGEx | Sample : Nearest Points'
icon: circle
---

# Nearest Point

{% hint style="info" %}
### AI-generated page -- to be reviewed

While not 100% accurate, it should properly capture what the node/factory does. It stills needs to be proofread by a human.
{% endhint %}

> Samples target points based on proximity and applies blending operations to extract data from them.

### Overview

This node finds the nearest target points to each input point and samples their attributes. It's useful for gathering information from nearby geometry or data points, such as sampling terrain height, color, or other properties from surrounding locations.

The node supports multiple sampling methods, including within a distance range or selecting the best candidate based on a sorting criteria. You can blend data from multiple targets using various blending modes like average, weighted sum, or copy.

{% hint style="info" %}
This node works with point data and requires a target input to sample from. The target points are typically generated by other nodes in your graph.
{% endhint %}

<details>

<summary>Inputs</summary>

* **Main Input (Default)**: Points to sample from.
* **Target Input (Optional)**: Target points to sample data from. If not provided, the node will sample from the main input.

</details>

<details>

<summary>Outputs</summary>

* **Main Output (Default)**: The processed points with sampled attributes added or modified.

</details>

### Properties Overview

Settings are grouped into categories for easy navigation.

***

#### General

Controls how data is matched and filtered between source and target points.

**Data Matching**

_Controls how to match source points to target points._

* When enabled, allows you to filter which targets get sampled by which data.
* This setting is useful when you want to sample different sets of targets based on the source point's properties.

***

#### Sampling

Configures how points are selected for sampling.

**Sample Method**

_Selects the method used to find target points._

* **Within Range**: Samples all targets within a specified distance range.
* **Best Candidate**: Samples only the closest target, sorted by a specified direction.

**Sort Direction**

_Sets the sorting order when using "Best Candidate" sampling._

* When set to **Ascending**, the closest point is selected.
* When set to **Descending**, the furthest point is selected.

**Range Min**

_Minimum distance to sample targets from._

* If set to a constant value, all points must be at least this far from targets to be considered.
* If set to an attribute, each point uses its own minimum distance value.

**Range Max**

_Maximum distance to sample targets from._

* If set to a constant value, all points must be within this distance of targets to be considered.
* If set to an attribute, each point uses its own maximum distance value.

***

#### Weighting

Controls how weights are calculated and applied during blending.

**Distance Method**

_Specifies the method used to calculate distances between points._

* Uses standard Euclidean distance by default.
* You can configure other distance metrics for specialized use cases.

**Weight Mode**

_Selects how to compute weights for blending._

* **Distance**: Weights are based on inverse distance (closer = higher weight).
* **Attribute**: Reads weights from a specified attribute on the target points.
* **None**: No weighting is applied; all samples contribute equally.

**Weight Attribute**

_The attribute name to read weights from when using "Attribute" weight mode._

* Only used when **Weight Mode** is set to **Attribute**.

**Weight Method**

_Specifies how to scale weights over the distance range._

* **Full Range**: Uses weights directly as computed.
* **Normalized**: Normalizes weights so they sum to 1.
* **Clamped**: Clamps weights between 0 and 1.

**Use Local Curve**

_When enabled, uses an in-editor curve for weight distribution._

* Only available when **Weight Mode** is not set to **Attribute**.
* Allows fine-tuning of how weight decreases with distance.

**Weight Over Distance**

_The curve used to modify weights based on distance._

* Only visible when **Use Local Curve** is enabled.
* Defines how the influence of a target point diminishes as it gets further away.

**Curve Lookup**

_Configures how to sample from the weight curve._

* Allows for more advanced lookup methods if needed.

***

#### Blending

Defines how data from sampled points is combined and written to output attributes.

**Blending Interface**

_Specifies how to blend data from multiple targets._

* **Individual**: Each target contributes individually.
* **Monolithic**: All targets are blended together into a single value.

**Target Attributes**

_List of attributes to sample from the targets when using monolithic blending._

* Only visible when **Blending Interface** is set to **Monolithic**.
* You can specify which attributes to blend and how (e.g., average, sum).

**Blend Point Properties**

_When enabled, blends point properties like location, rotation, or scale._

* Only visible when **Blending Interface** is set to **Monolithic**.
* Controls whether to compute a blended transform from the sampled points.

**Point Properties Blending Settings**

_Configures how point properties are blended._

* Only visible when **Blend Point Properties** is enabled.
* Allows you to choose the blending method for each property (e.g., average, copy).

***

#### Outputs

Controls which attributes are written to the output points.

**Write Success**

_When enabled, writes a boolean indicating if sampling was successful._

* Useful for debugging or filtering points that failed to sample.

**Success Attribute Name**

_Name of the boolean attribute to write success status to._

* Only visible when **Write Success** is enabled.

**Write Transform**

_When enabled, writes the sampled transform._

* Writes a combined transform from all sampled targets if using monolithic blending.

**Transform Attribute Name**

_Name of the transform attribute to write sampled transform to._

* Only visible when **Write Transform** is enabled.

**Write LookAt Transform**

_When enabled, writes a look-at transform based on sampled points._

* Computes a transform that looks toward the sampled targets.
* Useful for orienting objects toward nearby geometry.

**LookAt Axis Align**

_Specifies which axis of the look-at transform to align with the sampling direction._

* **Forward**: Aligns the forward axis with the direction to the target.
* **Backward**: Aligns the backward axis with the direction to the target.
* **Right**: Aligns the right axis with the direction to the target.
* **Left**: Aligns the left axis with the direction to the target.
* **Up**: Aligns the up axis with the direction to the target.
* **Down**: Aligns the down axis with the direction to the target.

**LookAt Up Selection**

_Specifies how to determine the up vector for the look-at transform._

* **Constant**: Uses a fixed up vector.
* **Attribute**: Reads the up vector from an attribute on the source point.
* **Target**: Uses the up vector from the sampled target point.

**LookAt Up Source**

_The attribute or property to use as the up vector when using "Attribute" mode._

* Only visible when **LookAt Up Selection** is set to **Attribute**.

**LookAt Up Constant**

_The fixed up vector to use when using "Constant" mode._

* Only visible when **LookAt Up Selection** is set to **Constant**.

**Write Distance**

_When enabled, writes the sampled distance._

* Outputs the distance from the source point to the sampled target(s).

**Distance Attribute Name**

_Name of the double attribute to write sampled distance to._

* Only visible when **Write Distance** is enabled.

**Output Normalized Distance**

_When enabled, outputs a normalized version of the distance._

* Normalizes the distance between 0 and 1 based on the range settings.
* Useful for creating consistent visual effects regardless of scale.

**Output OneMinus Distance**

_When enabled, inverts the normalized distance._

* Subtracts the normalized distance from 1 (i.e., 1 - distance).
* Useful for creating inverse relationships or fade-out effects.

**Distance Scale**

_Scales the output distance value._

* Allows you to easily invert the distance using a scale of -1.
* Can be used to adjust the magnitude of the output.

**Write Signed Distance**

_When enabled, writes the signed distance._

* Outputs the distance with a sign indicating direction relative to an axis.

**Signed Distance Attribute Name**

_Name of the double attribute to write signed distance to._

* Only visible when **Write Signed Distance** is enabled.

**Sign Axis**

_Specifies which axis to use for calculating the signed distance._

* **Forward**: Uses the X-axis.
* **Backward**: Uses the negative X-axis.
* **Right**: Uses the Y-axis.
* **Left**: Uses the negative Y-axis.
* **Up**: Uses the Z-axis.
* **Down**: Uses the negative Z-axis.

**Signed Distance Scale**

_Scales the output signed distance value._

* Allows you to easily invert the signed distance using a scale of -1.

**Write Component Wise Distance**

_When enabled, writes component-wise distances._

* Outputs separate distances along each axis (X, Y, Z).

**Component Wise Distance Attribute Name**

_Name of the FVector attribute to write component-wise distances to._

* Only visible when **Write Component Wise Distance** is enabled.

**Absolute Component Wise Distance**

_When enabled, outputs absolute values for component-wise distances._

* Ensures all components are positive.
* Useful for visualizing distances without direction information.

**Write Angle**

_When enabled, writes the angle between source and target points._

* Computes an angle based on the axis specified.

**Angle Attribute Name**

_Name of the double attribute to write the angle to._

* Only visible when **Write Angle** is enabled.

**Angle Axis**

_Specifies which axis to use for computing the angle._

* **Forward**: Uses the X-axis.
* **Backward**: Uses the negative X-axis.
* **Right**: Uses the Y-axis.
* **Left**: Uses the negative Y-axis.
* **Up**: Uses the Z-axis.
* **Down**: Uses the negative Z-axis.

**Angle Range**

_Specifies the unit and range for the output angle._

* **Radians (0..+PI)**: Outputs radians from 0 to π.
* **Radians (-PI..+PI)**: Outputs radians from -π to π.
* **Radians (0..+TAU)**: Outputs radians from 0 to 2π.
* **Degrees (0..+180)**: Outputs degrees from 0 to 180.
* **Degrees (-180..+180)**: Outputs degrees from -180 to 180.
* **Degrees (0..+360)**: Outputs degrees from 0 to 360.
* **Normalized Half (0..180 -> 0..1)**: Normalizes 0 to 180 degrees to 0 to 1.
* **Normalized (0..+360 -> 0..1)**: Normalizes 0 to 360 degrees to 0 to 1.
* **Inv. Normalized Half (0..180 -> 1..0)**: Inverts the normalized half range.
* **Inv. Normalized (0..+360 -> 1..0)**: Inverts the normalized full range.

**Write Num Samples**

_When enabled, writes the number of sampled targets._

* Useful for tracking how many points were found within the sampling range.

**Num Samples Attribute Name**

_Name of the int32 attribute to write the number of samples to._

* Only visible when **Write Num Samples** is enabled.

**Write Sampled Index**

_When enabled, writes the index of the sampled target._

* Only writes the index of the closest point if multiple points are sampled.
* Useful for identifying which specific target was selected.

**Sampled Index Attribute Name**

_Name of the int32 attribute to write the sampled index to._

* Only visible when **Write Sampled Index** is enabled.

***

#### Tagging

Adds tags to output data based on sampling success.

**Tag If Has Successes**

_When enabled, adds a tag if at least one point was successfully sampled._

* Useful for filtering or organizing output data based on sampling results.

**Has Successes Tag**

_Name of the tag to add when sampling succeeds._

* Only visible when **Tag If Has Successes** is enabled.

**Tag If Has No Successes**

_When enabled, adds a tag if no points were sampled._

* Useful for identifying areas where sampling failed.

**Has No Successes Tag**

_Name of the tag to add when sampling fails._

* Only visible when **Tag If Has No Successes** is enabled.

***

#### Advanced

Controls how filtered-out points are handled and other edge cases.

**Process Filtered Out As Fails**

_When enabled, treats filtered-out points as failures._

* Ensures that points not passing filters are marked as such.
* Otherwise, they are skipped entirely.

**Prune Failed Samples**

_When enabled, removes points that failed to sample anything._

* Useful for cleaning up output data by removing failed samples.

**Ignore Self**

_When enabled, excludes the source point from being selected as a target._

* Prevents self-sampling when using the main input as targets.
* Ensures that each point samples from other points only.
